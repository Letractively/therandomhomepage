<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
		<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>
					Google Web Toolkit 
					
						- Sharing objects between Java source and JavaScript</title>
        <meta content="text/html; charset=utf-8" http-equiv="content-type"/>
        <link type="text/css" rel="stylesheet" href="../css/base.css"/>
        <link type="text/css" rel="stylesheet" href="./doc.css"/>
        <link type="text/css" media="print" rel="stylesheet" href="../css/print.css"/>
    </head>
    <body>
        <div xmlns="" id="gaia">&nbsp;</div>
        <div xmlns="" id="header">
            <div id="logo">
                <a href="http://code.google.com/"><img alt="Google" src="http://code.google.com/images/code_sm.png"></a>
            </div>
            <div id="title">Google Web Toolkit (Beta)</div>
            <div id="breadcrumbs">
                <div id="nextprev">
                    <nobr><a href="com.google.gwt.doc.DeveloperGuide.JavaScriptNativeInterface.JavaFromJavaScript.html">&laquo; prev</a></nobr> <nobr><a href="com.google.gwt.doc.DeveloperGuide.JavaScriptNativeInterface.JsniExceptions.html">next &raquo;</a></nobr>
                </div>
                <span class="item"><a href="http://code.google.com/">Google Code Home</a></span> &gt;
				<span class="item"><a href="http://code.google.com/webtoolkit/">Google Web Toolkit</a></span> &gt;
				
				<span class="item"><a href="com.google.gwt.doc.DeveloperGuide.html">Developer Guide</a></span> &gt;
						<span class="item"><a href="com.google.gwt.doc.DeveloperGuide.JavaScriptNativeInterface.html">JavaScript Native Interface (JSNI)</a></span> &gt;
						<span class="selected item">Sharing objects between Java source and JavaScript</span>
            </div>
        </div>
        <div xmlns="" id="side">
            <div id="menu">
                <div class="header item">
                    <a href="http://code.google.com/webtoolkit/">Google Web Toolkit</a>
                </div>
                <div class="group">
                    <div class="item">
                        <a href="http://code.google.com/webtoolkit/overview.html">Product Overview</a>
                    </div>
                    <div class="item">
                        <a href="http://code.google.com/webtoolkit/gettingstarted.html">Getting Started Guide</a>
                    </div>
                    <div class="item">
                        <a href="http://code.google.com/webtoolkit/download.html">Download SDK</a>
                    </div>
                </div>
                <div class="group">
                    <div class="item  selected">
                        <a href="./com.google.gwt.doc.DeveloperGuide.html">Developer Guide</a>
                    </div>
                    <div class="group">
                        <div class="item">
                            <a href="http://code.google.com/webtoolkit/documentation/examples/">Example Projects</a>
                        </div>
                        <div class="item">
                            <a href="./gwt.html">GWT Class Reference</a>
                        </div>
                        <div class="item">
                            <a href="./jre.html">JRE Emulation Library</a>
                        </div>
                    </div>
                </div>
                <div class="group">
                    <div class="item">
                        <a href="http://code.google.com/webtoolkit/faq.html">Web Toolkit FAQ</a>
                    </div>
                    <div class="item">
                        <a href="http://googlewebtoolkit.blogspot.com/">Web Toolkit Blog</a>
                    </div>
                    <div class="item">
                        <a href="http://code.google.com/webtoolkit/issues/">Issue Tracking</a>
                    </div>
                    <div class="item">
                        <a href="http://groups.google.com/group/Google-Web-Toolkit">Developer Forum</a>
                    </div>
                </div>
            </div>
            <div id="search">
                <form method="get" action="http://www.google.com/search">
                    <div>
                        <input value="code.google.com" name="domains" type="hidden"><input value="code.google.com" name="sitesearch" type="hidden">
                        <div class="header">Search Google Code</div>
                        <div class="input">
                            <input size="10" name="q">
                        </div>
                        <div class="button">
                            <input value="Search" type="submit">
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div id="body">
            <h1>Sharing objects between Java source and JavaScript</h1>Parameters and return types in JSNI methods are declared as Java types.
 There are very specific rules for how values passing in and out of
 JavaScript code must be treated. These rules must be followed whether the
 values enter and leave through normal method call semantics, or through
 the
 <a xmlns="" href="com.google.gwt.doc.DeveloperGuide.JavaScriptNativeInterface.JavaFromJavaScript.html">special syntax</a>.
 
 <p>
                <h2>Passing Java values into JavaScript</h2>
            </p>
            <table width="80%" align="center">
                <tr valign="top">
                    <th width="30%" align="left">Incoming Java type</th><th width="70%" align="left">How it appears to JavaScript code</th>
                </tr>
                <tr valign="top">
                    <td><nobr>a Java numeric primitive</nobr></td><td>a JavaScript numeric value, as in <nobr><code>var x = 42;</code></nobr></td>
                </tr>
                <tr valign="top">
                    <td><code>String</code></td><td> a JavaScript string, as in <nobr><code>var s = "my string";</code></nobr></td>
                </tr>
                <tr valign="top">
                    <td><code>boolean</code></td><td>a JavaScript boolean value, as in <nobr><code>var b = true;</code></nobr></td>
                </tr>
                <tr valign="top">
                    <td><nobr><a xmlns="" href="com.google.gwt.core.client.JavaScriptObject.html">JavaScriptObject</a> (see
 notes)</nobr></td><td>a <code>JavaScriptObject</code> that must have originated from
 JavaScript code, typically as the return value of some other JSNI method
 </td>
                </tr>
                <tr valign="top">
                    <td><nobr>Java array</nobr></td><td> an opaque value that can only be passed back into Java code</td>
                </tr>
                <tr valign="top">
                    <td><nobr>any other Java <code>Object</code></nobr></td><td> an opaque value accessible through
 <a xmlns="" href="com.google.gwt.doc.DeveloperGuide.JavaScriptNativeInterface.JavaFromJavaScript.html">special syntax</a></td>
                </tr>
            </table>
            <p>
                <h2>Passing JavaScript values into Java code</h2>
            </p>
            <table width="80%" align="center">
                <tr valign="top">
                    <th width="30%" align="left">Outgoing Java type</th><th width="70%" align="left">What must be passed</th>
                </tr>
                <tr valign="top">
                    <td><nobr>a Java numeric primitive</nobr></td><td>a JavaScript numeric value, as in <nobr><code>return 19;</code></nobr></td>
                </tr>
                <tr valign="top">
                    <td><code>String</code></td><td>a JavaScript string, as in <nobr><code>return "boo";</code></nobr></td>
                </tr>
                <tr valign="top">
                    <td><code>boolean</code></td><td> a JavaScript boolean value, as in <nobr><code>return false;</code></nobr></td>
                </tr>
                <tr valign="top">
                    <td><nobr><a xmlns="" href="com.google.gwt.core.client.JavaScriptObject.html">JavaScriptObject</a> (see notes)</nobr></td><td> a native JavaScript object, as in <nobr><code>return
 document.createElement("div")</code></nobr></td>
                </tr>
                <tr valign="top">
                    <td><nobr>any other Java <code>Object</code> (including arrays)</nobr></td><td>a Java <code>Object</code> of the correct type that must have
 originated in Java code; Java objects cannot be constructed from "thin
 air" in JavaScript</td>
                </tr>
            </table>
            <h2>Important Notes</h2>
            <ul>
                <li> A Java numeric primitive is one of <code>byte</code>,
 <code>short</code>, <code>char</code>, <code>int</code>,
 <code>long</code>, <code>float</code>, or <code>double</code>.
 You must ensure the value is appropriate for the declared type. Returning
 <code>3.7</code> when the declared type is <code>int</code> will
 cause unpredictable behavior. </li>
                <li> Java <code>null</code> and JavaScript <code>null</code> are
 identical and always legal values for any non-primitive Java type.
 JavaScript <code>undefined</code> is <i>not</i> identical to
 <code>null</code>; never return <code>undefined</code> from a JSNI
 method or unpredictable behavior will occur. </li>
                <li>
                    <a xmlns="" href="com.google.gwt.core.client.JavaScriptObject.html">JavaScriptObject</a> is a magical type that gets special
 treatment from the GWT compiler and hosted browser. Its purpose is to
 provide an opaque representation of native JavaScript objects to Java
 code.</li>
            </ul>
        </div>
        <div id="footer">
      &copy;2006 Google
      <span class="noprint"> -
        <a href="http://www.google.com/">Google Home</a> -
        <a href="http://www.google.com/jobs/">We're Hiring</a> -
        <a href="http://www.google.com/privacy.html">Privacy Policy</a> -
        <a href="http://www.google.com/terms_of_service.html">Terms of Service</a> -
        <a href="mailto:code@google.com">Contact Us</a>
            </span>
        </div>
        <script type="text/javascript" src="https://ssl.google-analytics.com/urchin.js"/>
        <script type="text/javascript">_uacct="UA-18071-1"; _uanchor=1; urchinTracker();</script>
    </body>
</html>
